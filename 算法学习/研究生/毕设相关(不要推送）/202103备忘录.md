# 第一周

## 2021年3月1日，Mon.

1. 修改论文，摘要和结论，送评阅
   - X方向最大误差的情况分析：主要原因+次要原因，定性定量，数据支撑
   - 与（检测）单线和（跟踪）DR的对比

## 2021年3月4日，Wen.

1. 梳理论文逻辑，分析清楚问题

   1. 量化 定位的误差。

      -->>按照相对位置关系，更换定位的基准试试

      -->>分析最大误差量化其构成

   2. 由单线和DR引出问题分析 -->> 对比性能和改善的地方

2. 制作PPT（3月9号）



## 2021-03-05，Thur.

1. ### 分析jiaoyun-ver2，修改算法

   1. 最大误差情形1，残缺+噪点？

   <img src="202103备忘录/image-20210305103614587.png" alt="image-20210305103614587" style="zoom:40%;" /><img src="202103备忘录/image-20210305104721877.png" alt="image-20210305104721877" style="zoom:50%;" />

   - 加入统计滤波看看噪声点效果如何，

     == 滤波参数25\1.0，过滤太多了，调小一点. 较远的地方B车点云已经被删除了大部分。

     ==25\3.0,要好一些了，当噪点还是很抖动

     ==25\2.0, 点云太小，偏向1.0

     ==35/2.0，还是很小

     == 40/2.5，**OK**

   - 长宽的拓展方向总是有错会一直抖动，会不会带来的误差比不拓展还大？

     == 为啥拓展长？为了解决库位的四个点找不准？——但是拓展不准，反向之后更会造成4个点排序混乱，是否有必要？

     ==为啥拓展宽？为了弥补看不到圆角。感觉没啥必要，更换定位路标更重要。

     == 尝试取消拓展，效果如何？

     - 无拓展

     <img src="202103备忘录/image-20210305155221774.png" alt="image-20210305155221774" style="zoom:%;" />![image-20210305155744775](202103备忘录/image-20210305155744775.png)

     - 拓展

     

     ![image-20210305160010148](202103备忘录/image-20210305160010148.png)![image-20210305155837176](202103备忘录/image-20210305155837176.png)

     == 从观测值来看，*不拓展好那么一丢丢*；倒车大转角处拓展就会很差，直接失效启动行位推算了。最后位置y方向拓展会好一些

     ![image-20210305175412358](202103备忘录/image-20210305175412358.png)

     <img src="202103备忘录/image-20210305182129241.png" alt="image-20210305182129241" style="zoom:;" />![image-20210305182202941](202103备忘录/image-20210305182202941.png)

     ​                                                           

     

     

   - 按照相对位置关系判断以哪一个做为基准点？

     == 对比下有switch算法和没有的差别

   

   2. 标的真值也发生了偏差，坐标转换过程中有偏差？

   <img src="202103备忘录/image-20210305103614587.png" alt="image-20210305103614587" style="zoom: 50%;" /><img src="202103备忘录/image-20210305180903787.png" alt="image-20210305180903787" style="zoom:50%;" />

   <img src="202103备忘录/image-20210305181419945.png" alt="image-20210305181419945" style="zoom:33%;" /><img src="202103备忘录/image-20210305180903787.png" alt="image-20210305180903787" style="zoom:50%;" />

   <img src="202103备忘录/image-20210305181419945.png" alt="image-20210305181419945" style="zoom:30%;" /><img src="202103备忘录/image-20210305181545324.png" alt="image-20210305181545324" style="zoom: 33%;" />

   <img src="202103备忘录/image-20210305181419945.png" alt="image-20210305181419945" style="zoom: 33%;" /><img src="202103备忘录/image-20210305181545324.png" alt="image-20210305181545324" style="zoom:50%;" />

   

   <img src="202103备忘录/image-20210305182025204.png" alt="image-20210305182025204" style="zoom:50%;" />

   

## 2021-03-07，Sunday

### jiaoyun-ver2分析

最大误差，情形一，远离库位。

**主要原因**：点云残缺，

**次要原因**：噪点，拓展框抖动

1. 次要原因：噪点

   - k/std = 70/1.0;  leafsize0.05/0.05/1.0

   == 噪点过滤得太猛了

   - k/std = 50/1.5; 

     <img src="202103备忘录/image-20210307112350352.png" alt="image-20210307112350352" style="zoom:33%;" />

   - voxelGrid Z-leafsize增大 

     ==效果聊胜于无

   - minimunPointsNumber（2）leafsize=0.05/0.05/2

     <img src="202103备忘录/image-20210307140809379.png" alt="image-20210307140809379" style="zoom:50%;" />

     ==minNumber(1) leafsize=0.04/0.04/5,很难调好，k,sd=50,2.0

     ==*放弃噪音点优化这个吧。*

2. 主要原因，残缺

   失效时刻1，离B车太远了残缺——**ICP补全**，A车库位角又残缺了——**拓展宽度** & **更换定位基准**

   按照相对位置关系判断以哪一个做为基准点？对比下有switch算法和没有的差别？

   - 按照库位坐标系下自车位置，切换使用B点定位

     == try1好像没起作用

     == try2 滤波后，点残缺但是效果变好了,残缺厉害后，拓展也容易失效了。

     ==3 好像误差是小了一点点，>1.5m

   - 拓展长度容易翻转，失效

     == 都拓展，然后使用B车定位，噪音稍微消除k,sd=50,1.5

   

   - == 对比下有switch算法和没有的差别

     ==有switch & 强制B车定位 无tuozhan

     ![image-20210307204559391](202103备忘录/image-20210307204559391.png)<img src="202103备忘录/image-20210307205531194.png" alt="image-20210307205531194" style="zoom:80%;" />

     ==无switch和强制B，有拓展

     == <img src="202103备忘录/image-20210307204851097.png" alt="image-20210307204851097" style="zoom:80%;" />![image-20210307205431178](202103备忘录/image-20210307205431178.png)

     =有switch无强制B，有拓展

     <img src="202103备忘录/x.svg" alt="x" style="zoom:80%;" /><img src="202103备忘录/position.svg" alt="position" style="zoom:80%;" />

     

   <img src="202103备忘录/y.svg" alt="y" style="zoom:80%;" /><img src="202103备忘录/angle.svg" alt="angle" style="zoom:80%;" />

   <img src="202103备忘录/x_err.svg" alt="x_err" style="zoom:80%;" /><img src="202103备忘录/image-20210307211624706.png" alt="image-20210307211624706" style="zoom:80%;" />

   ==可以看出在大误差情形1的时候，依靠残缺的B定位还没有拓展可靠；而在内部的时候有switch明显改善很多。